---
title: Synchronizing with Effects
date: 2026-01-21
---
## 이펙트란?

리액트 컴포넌트 안에는 두 종류의 코드가 있다.

- 렌더링 코드 : 순수 함수
- 이벤트 핸들러 : side effect 유발

그런데 이 두가지로 부족한 경우가 있다. 채팅방 입장과 같이 컴포넌트가 **렌더링 될 때 실행되어야 하는 코드**도 있다. 순수 함수가 아니기 때문에 렌더링 코드에 포함될 수 없고, 딱히 서버에 연결할 이벤트가 있는것도 어색하다.

이럴때 사용하는게 Effect다. 렌더링도 하나의 이벤트라면 렌더링이라는 이벤트 핸들러라고 볼 수 있을까.

이펙트의 주 사용 목적은 리액트 밖의 외부 시스템(브라우저 DOM api, 네트워크, 타 라이브러리 등)과의 소통이다. 그래서 이러한 목적이 아닌 경우에는 사용하지 않는것이 좋다.

## 이펙트 작성하기

### 1. 이펙트 정의

- 컴포넌트의 최상위 레벨에 작성한다.
- 이펙트는 화면이 업데이트 된 후에 실행되기 때문에 약간의 딜레이가 발생할 수 있다.
- `useEffect` 훅 안에 작성해야 하는 이유는 먼저 렌더링 코드의 순수성을 방해하지 않기 위함이기도 하지만, 렌더링 이전에는 이펙트에서 사용할 DOM 노드가 존재하지 않기 때문이다.
### 2. 의존성 배열 

기본적으로 이펙트는 모든 렌더링마다 실행되는데, 많은 경우 성능 저하를 유발하거나(키보드 입력마다 채팅 서버에 연결), UI를 망가뜨린다(키보드 입력마다 fade-in 애니메이션).
이를 방지하기 위해 의존성 배열에 이펙트 실행을 유발하는 변수들을 넣어 이펙트 실행을 특정할 수 있다.
### 3. 클린업 함수

이펙트는 리액트 외부와 소통하는 창구이기 때문에, 반드시 리액트 컴포넌트와 생명주기가 같지 않다. 그래서 이벤트리스너 등록, 외부 라이브러리의 인스턴스 생성, 웹소켓 연결과 같은 코드들은 리액트 컴포넌트가 사라져도(언마운트) 계속 남아있게 되기 때문에 이것을 해지해주는 클린업 함수가 필요하다.
